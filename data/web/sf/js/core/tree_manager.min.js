(function(h,a,g){var f=function(c,b){this.$element=a(c);this.id=this.$element.prop("id")||"";this.options=a.extend(!0,{},a.fn.treeManager.defaults,b);g.prepareTreeWidget(this.$element);b=g.getTreeWidgetOptions(this.$element);if(b.url&&!b.dnd)b.dnd={preventVoidMoves:!0,onDragStart:a.proxy(this.onDragStartHandler,this),onDragOver:a.proxy(this.onDragOverHandler,this),onDrop:a.proxy(this.onDropHandler,this),onDragEnter:a.proxy(this.onDragEnterHandler,this),autoExpandMS:1E3};this.$element.dynatree(b)};
f.prototype={constructor:f,onDragStartHandler:function(){return!0},onDragEnterHandler:function(){return!0},onDragOverHandler:function(a,b){return a.isDescendantOf(b)?!1:!0},onDropHandler:function(c,b,d){var e=this.options.url;e&&(e=a.extend({},this.options.ajaxSettings,{url:e,data:{source:b.data.key,target:c.data.key,type:d},async:!1,success:function(a){a.success&&(b.move(c,d),b.makeVisible(!0),b.expand(!0))}}),a.ajax(e))}};a.fn.treeManager=function(c){return this.each(function(){var b=a(this),d=
b.data("treeManager"),e=typeof c==="object"&&c;d||b.data("treeManager",d=new f(this,e));if(typeof c==="string")d[c]()})};a.fn.treeManager.defaults={ajaxSettings:{type:"POST",dataType:"json"}};a.fn.treeManager.Constructor=f})(window,window.jQuery,window.Application);
