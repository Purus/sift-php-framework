(function(g,c,h){function f(a,b){if(!e.allowOverwrite&&void 0!==d[a])throw new Exception("TemplateName: "+a+" is already mapped.");var k=!1;"function"===typeof b?k=!0:b=c.trim(b);d[a]={compiled:k,tpl:b}}function l(a,b){if(void 0===d[a]){if(e.warnOnMissingTemplates)throw new Exception("No template registered for: "+a);return""}return(d[a].compiled?h.template(d[a].tpl):h.compile(d[a].tpl))(b)}var d={},e={warnOnMissingTemplates:!0,allowOverwrite:!0,domTemplateTypes:["text/html","text/x-handlebars-template"],
externalTemplateDataType:"text"},m={options:e,load:function(a,b){return c.ajax({url:a,dataType:e.externalTemplateDataType}).done(function(a){c(a).filter("script").each(function(a,b){f(b.id,c(b).html())});c.isFunction(b)&&b()})},add:f,addFromDom:function(){var a;if(0===arguments.length){a=[];for(var b=0;b<e.domTemplateTypes.length;b++)a.push('script[type="'+e.domTemplateTypes[b]+'"]');a=c(a.join(",")).map(function(){return this.id})}else a=c.makeArray(arguments);c.each(a,function(){var a=document.getElementById(this);
if(null===a)throw new Exception("No such elementId: #"+this);f(this,c(a).html())})},remove:function(a){var b=d[a];delete d[a];return b},clear:function(){d={}},render:l,templates:function(){return c.map(d,function(a,b){return b})}};g.Template=m;c.fn.template=function(a,b,d){var e=c.extend({method:"append"},d),f=function(b,d){c(b)[e.method](l(a,d))};return this.each(function(){var a=this;c.isArray(b)?c.each(b,function(){f(a,this)}):f(a,b)})};c(g).bind("setup",function(){m.addFromDom()})})(window,window.jQuery,
window.Handlebars);
