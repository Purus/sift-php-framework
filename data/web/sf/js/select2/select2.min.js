(function(e){typeof e.fn.each2=="undefined"&&e.fn.extend({each2:function(g){for(var m=e([0]),u=-1,l=this.length;++u<l&&(m.context=m[0]=this[u])&&g.call(m[0],u,m)!==!1;);return this}})})(jQuery);
(function(e,g){function m(a,b){for(var c=0,d=b.length;c<d;c+=1)if(l(a,b[c]))return c;return-1}function u(){var a=e(N);a.appendTo("body");var b={width:a.width()-a[0].clientWidth,height:a.height()-a[0].clientHeight};a.remove();return b}function l(a,b){return a===b?!0:a===g||b===g?!1:a===null||b===null?!1:a.constructor===String?a+""===b+"":b.constructor===String?b+""===a+"":!1}function y(a,b){var c,d,i;if(a===null||a.length<1)return[];c=a.split(b);for(d=0,i=c.length;d<i;d+=1)c[d]=e.trim(c[d]);return c}
function E(a){a.bind("keydown",function(){e.data(a,"keyup-change-value")===g&&e.data(a,"keyup-change-value",a.val())});a.bind("keyup",function(){var b=e.data(a,"keyup-change-value");b!==g&&a.val()!==b&&(e.removeData(a,"keyup-change-value"),a.trigger("keyup-change"))})}function O(a){a.bind("mousemove",function(a){var c=F;(c===g||c.x!==a.pageX||c.y!==a.pageY)&&e(a.target).trigger("mousemove-filtered",a)})}function G(a,b,c){var c=c||g,d;return function(){var e=arguments;window.clearTimeout(d);d=window.setTimeout(function(){b.apply(c,
e)},a)}}function P(a){var b=!1,c;return function(){b===!1&&(c=a(),b=!0);return c}}function Q(a,b){var c=G(a,function(a){b.trigger("scroll-debounced",a)});b.bind("scroll",function(a){m(a.target,b.get())>=0&&c(a)})}function H(a){a[0]!==document.activeElement&&window.setTimeout(function(){var b=a[0],c=a.val().length;a.focus();a.is(":visible")&&b===document.activeElement&&(b.setSelectionRange?b.setSelectionRange(c,c):b.createTextRange&&(b=b.createTextRange(),b.collapse(!1),b.select()))},0)}function j(a){a.preventDefault();
a.stopPropagation()}function z(a,b,c){var d,i=[],h;(d=a.attr("class"))&&e((""+d).split(" ")).each2(function(){this.indexOf("select2-")===0&&i.push(this)});(d=b.attr("class"))&&e((""+d).split(" ")).each2(function(){this.indexOf("select2-")!==0&&(h=c(this))&&i.push(this)});a.attr("class",i.join(" "))}function I(a,b,c,d){var e=a.toUpperCase().indexOf(b.toUpperCase()),b=b.length;e<0?c.push(d(a)):(c.push(d(a.substring(0,e))),c.push("<span class='select2-match'>"),c.push(d(a.substring(e,e+b))),c.push("</span>"),
c.push(d(a.substring(e+b,a.length))))}function J(a){var b,c=0,d=null,i=a.quietMillis||100,h=a.url,k=this;return function(n){window.clearTimeout(b);b=window.setTimeout(function(){c+=1;var b=c,i=a.data,f=h,R=a.transport||e.ajax,j=a.cache||!1,l=a.jsonpCallback||g,m=a.type||"GET",w={},i=i?i.call(k,n.term,n.page,n.context):null,f=typeof f==="function"?f.call(k,n.term,n.page,n.context):f;null!==d&&d.abort();a.params&&(e.isFunction(a.params)?e.extend(w,a.params.call(k)):e.extend(w,a.params));e.extend(w,
{url:f,dataType:a.dataType,data:i,type:m,cache:j,jsonpCallback:l,success:function(d){b<c||(d=a.results(d,n.page),n.callback(d))}});d=R.call(k,w)},i)}}function K(a){var b=a,c,d,i=function(a){return""+a.text};e.isArray(b)&&(d=b,b={results:d});e.isFunction(b)===!1&&(d=b,b=function(){return d});a=b();if(a.text&&(i=a.text,!e.isFunction(i)))c=a.text,i=function(a){return a[c]};return function(a){var c=a.term,d={results:[]},f;c===""?a.callback(b()):(f=function(b,d){var g,n,b=b[0];if(b.children){g={};for(n in b)b.hasOwnProperty(n)&&
(g[n]=b[n]);g.children=[];e(b.children).each2(function(a,b){f(b,g.children)});(g.children.length||a.matcher(c,i(g),b))&&d.push(g)}else a.matcher(c,i(b),b)&&d.push(b)},e(b().results).each2(function(a,b){f(b,d.results)}),a.callback(d))}}function L(a){var b=e.isFunction(a);return function(c){var d=c.term,i={results:[]};e(b?a():a).each(function(){var a=this.text!==g,b=a?this.text:this;if(d===""||c.matcher(d,b))i.results.push(a?this:{id:this,text:this})});c.callback(i)}}function v(a){if(e.isFunction(a))return!0;
if(!a)return!1;throw Error("formatterName must be a function or a falsy value");}function p(a){return e.isFunction(a)?a():a}function M(a){var b=0;e.each(a,function(a,d){d.children?b+=M(d.children):b++});return b}function A(a,b){var c=function(){};c.prototype=new a;c.prototype.constructor=c;c.prototype.parent=a.prototype;c.prototype=e.extend(c.prototype,b);return c}if(window.Select2===g){var f,s,B,C,x,t,F,D;f={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,
PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(a){a=a.which?a.which:a;switch(a){case f.LEFT:case f.RIGHT:case f.UP:case f.DOWN:return!0}return!1},isControl:function(a){switch(a.which){case f.SHIFT:case f.CTRL:case f.ALT:return!0}return a.metaKey?!0:!1},isFunctionKey:function(a){a=a.which?a.which:a;return a>=112&&a<=123}};var N="<div class='select2-measure-scrollbar'></div>";s=e(document);x=function(){var a=1;return function(){return a++}}();s.bind("mousemove",function(a){F={x:a.pageX,
y:a.pageY}});s=A(Object,{bind:function(a){var b=this;return function(){a.apply(b,arguments)}},init:function(a){var b,c;this.opts=a=this.prepareOpts(a);this.id=a.id;a.element.data("select2")!==g&&a.element.data("select2")!==null&&this.destroy();this.enabled=!0;this.container=this.createContainer();this.containerId="s2id_"+(a.element.attr("id")||"autogen"+x());this.containerSelector="#"+this.containerId.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1");this.container.attr("id",this.containerId);
this.body=P(function(){return a.element.closest("body")});z(this.container,this.opts.element,this.opts.adaptContainerCssClass);this.container.css(p(a.containerCss));this.container.addClass(p(a.containerCssClass));this.elementTabIndex=this.opts.element.attr("tabindex");this.opts.element.data("select2",this).bind("focus.select2",function(){e(this).select2("focus")}).attr("tabindex","-1").before(this.container);this.container.data("select2",this);this.dropdown=this.container.find(".select2-drop");this.dropdown.addClass(p(a.dropdownCssClass));
this.dropdown.data("select2",this);this.results=b=this.container.find(".select2-results");this.search=c=this.container.find("input.select2-input");this.resultsPage=0;this.context=null;this.initContainer();O(this.results);this.dropdown.delegate(".select2-results","mousemove-filtered touchstart touchmove touchend",this.bind(this.highlightUnderEvent));Q(80,this.results);this.dropdown.delegate(".select2-results","scroll-debounced",this.bind(this.loadMoreIfNeeded));e(this.container).delegate(".select2-input",
"change",function(a){a.stopPropagation()});e(this.dropdown).delegate(".select2-input","change",function(a){a.stopPropagation()});e.fn.mousewheel&&b.mousewheel(function(a,c,e,k){c=b.scrollTop();k>0&&c-k<=0?(b.scrollTop(0),j(a)):k<0&&b.get(0).scrollHeight-b.scrollTop()+k<=b.height()&&(b.scrollTop(b.get(0).scrollHeight-b.height()),j(a))});E(c);c.bind("keyup-change input paste",this.bind(this.updateResults));c.bind("focus",function(){c.addClass("select2-focused")});c.bind("blur",function(){c.removeClass("select2-focused")});
this.dropdown.delegate(".select2-results","mouseup",this.bind(function(a){e(a.target).closest(".select2-result-selectable").length>0&&(this.highlightUnderEvent(a),this.selectHighlighted(a))}));this.dropdown.bind("click mouseup mousedown",function(a){a.stopPropagation()});e.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource());(a.element.is(":disabled")||a.element.is("[readonly='readonly']"))&&this.disable();D=D||u()},destroy:function(){var a=this.opts.element.data("select2");
if(this.propertyObserver)delete this.propertyObserver,this.propertyObserver=null;a!==g&&(a.container.remove(),a.dropdown.remove(),a.opts.element.removeClass("select2-offscreen").removeData("select2").unbind(".select2").attr({tabindex:this.elementTabIndex}).show())},optionToData:function(a){if(a.is("option"))return{id:a.attr("value"),text:a.text(),element:a.get(),css:a.attr("class"),disabled:l(a.attr("disabled"),"disabled"),locked:l(a.attr("locked"),"locked")};else if(a.is("optgroup"))return{text:a.attr("label"),
children:[],element:a.get(),css:a.attr("class")}},prepareOpts:function(a){var b,c,d,i=this;b=a.element;if(b.get(0).tagName.toLowerCase()==="select")this.select=c=a.element;c&&e.each("id,multiple,ajax,query,createSearchChoice,initSelection,data,tags".split(","),function(){if(this in a)throw Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.");});a=e.extend({},{populateResults:function(b,c,d){var f,o=this.opts.id;f=function(b,c,h){var k,j,l,m,p,r,q,b=a.sortResults(b,
c,d);for(k=0,j=b.length;k<j;k+=1)l=b[k],p=l.disabled===!0,m=!p&&o(l)!==g,r=l.children&&l.children.length>0,q=e("<li></li>"),q.addClass("select2-results-dept-"+h),q.addClass("select2-result"),q.addClass(m?"select2-result-selectable":"select2-result-unselectable"),p&&q.addClass("select2-disabled"),r&&q.addClass("select2-result-with-children"),q.addClass(i.opts.formatResultCssClass(l)),m=e(document.createElement("div")),m.addClass("select2-result-label"),p=a.formatResult(l,m,d,i.opts.escapeMarkup),p!==
g&&m.html(p),q.append(m),r&&(r=e("<ul></ul>"),r.addClass("select2-result-sub"),f(l.children,r,h+1),q.append(r)),q.data("select2-data",l),c.append(q)};f(c,b,0)}},e.fn.select2.defaults,a);if(typeof a.id!=="function")d=a.id,a.id=function(a){return a[d]};if(e.isArray(a.element.data("select2Tags"))){if("tags"in a)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+a.element.attr("id");a.tags=a.element.data("select2Tags")}if(c)a.query=this.bind(function(a){var c={results:[],
more:!1},d=a.term,f,o,l;l=function(b,c){var e;b.is("option")?a.matcher(d,b.text(),b)&&c.push(i.optionToData(b)):b.is("optgroup")&&(e=i.optionToData(b),b.children().each2(function(a,b){l(b,e.children)}),e.children.length>0&&c.push(e))};f=b.children();this.getPlaceholder()!==g&&f.length>0&&(o=f[0],e(o).text()===""&&(f=f.not(o)));f.each2(function(a,b){l(b,c.results)});a.callback(c)}),a.id=function(a){return a.id},a.formatResultCssClass=function(a){return a.css};else if(!("query"in a))if("ajax"in a){if((c=
a.element.data("ajax-url"))&&c.length>0)a.ajax.url=c;a.query=J.call(a.element,a.ajax)}else if("data"in a)a.query=K(a.data);else if("tags"in a){a.query=L(a.tags);if(a.createSearchChoice===g)a.createSearchChoice=function(a){return{id:a,text:a}};if(a.initSelection===g)a.initSelection=function(b,c){var d=[];e(y(b.val(),a.separator)).each(function(){var b=this,c=this,i=a.tags;e.isFunction(i)&&(i=i());e(i).each(function(){if(l(this.id,b))return c=this.text,!1});d.push({id:b,text:c})});c(d)}}if(typeof a.query!==
"function")throw"query function not defined for Select2 "+a.element.attr("id");return a},monitorSource:function(){var a=this.opts.element,b;a.bind("change.select2",this.bind(function(){this.opts.element.data("select2-change-triggered")!==!0&&this.initSelection()}));b=this.bind(function(){var a,b;a=this.opts.element.attr("disabled")!=="disabled";b=this.opts.element.attr("readonly")==="readonly";a=a&&!b;this.enabled!==a&&(a?this.enable():this.disable());z(this.container,this.opts.element,this.opts.adaptContainerCssClass);
this.container.addClass(p(this.opts.containerCssClass));z(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass);this.dropdown.addClass(p(this.opts.dropdownCssClass))});a.bind("propertychange.select2 DOMAttrModified.select2",b);if(this.mutationCallback===g)this.mutationCallback=function(a){a.forEach(b)};if(typeof WebKitMutationObserver!=="undefined"){if(this.propertyObserver)delete this.propertyObserver,this.propertyObserver=null;this.propertyObserver=new WebKitMutationObserver(this.mutationCallback);
this.propertyObserver.observe(a.get(0),{attributes:!0,subtree:!1})}},triggerSelect:function(a){a=e.Event("selected",{val:this.id(a),object:a});this.opts.element.trigger(a);return!a.isDefaultPrevented()},triggerChange:function(a){a=a||{};a=e.extend({},a,{type:"change",val:this.val()});this.opts.element.data("select2-change-triggered",!0);this.opts.element.trigger(a);this.opts.element.data("select2-change-triggered",!1);this.opts.element.click();this.opts.blurOnChange&&this.opts.element.blur()},enable:function(){if(!this.enabled)this.enabled=
!0,this.container.removeClass("select2-container-disabled"),this.opts.element.removeAttr("disabled")},disable:function(){if(this.enabled)this.close(),this.enabled=!1,this.container.addClass("select2-container-disabled"),this.opts.element.attr("disabled","disabled")},opened:function(){return this.container.hasClass("select2-dropdown-open")},positionDropdown:function(){var a=this.dropdown,b=this.container.offset(),c=this.container.outerHeight(!1),d=this.container.outerWidth(!1),i=a.outerHeight(!1),
h=e(window).scrollLeft()+e(window).width(),k=e(window).scrollTop()+e(window).height(),c=b.top+c,f=b.left,k=c+i<=k,g=b.top-i>=this.body().scrollTop(),o=a.outerWidth(!1),l=f+o<=h,j=a.hasClass("select2-drop-above");this.opts.dropdownAutoWidth?(o=e(".select2-results",a)[0],a.addClass("select2-drop-auto-width"),a.css("width",""),o=a.outerWidth(!1)+(o.scrollHeight===o.clientHeight?0:D.width),o>d?d=o:o=d,l=f+o<=h):this.container.removeClass("select2-drop-auto-width");this.body().css("position")!=="static"&&
(h=this.body().offset(),c-=h.top,f-=h.left);j?(h=!0,!g&&k&&(h=!1)):(h=!1,!k&&g&&(h=!0));l||(f=b.left+d-o);h?(c=b.top-i,this.container.addClass("select2-drop-above"),a.addClass("select2-drop-above")):(this.container.removeClass("select2-drop-above"),a.removeClass("select2-drop-above"));b=e.extend({top:c,left:f,width:d},p(this.opts.dropdownCss));a.css(b)},shouldOpen:function(){var a;if(this.opened())return!1;a=e.Event("opening");this.opts.element.trigger(a);return!a.isDefaultPrevented()},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above");
this.dropdown.removeClass("select2-drop-above")},open:function(){if(!this.shouldOpen())return!1;window.setTimeout(this.bind(this.opening),1);return!0},opening:function(){function a(){return{width:Math.max(document.documentElement.scrollWidth,e(window).width()),height:Math.max(document.documentElement.scrollHeight,e(window).height())}}var b=this.containerId,c="scroll."+b,d="resize."+b,i="orientationchange."+b;this.container.addClass("select2-dropdown-open").addClass("select2-container-active");this.clearDropdownAlignmentPreference();
this.dropdown[0]!==this.body().children().last()[0]&&this.dropdown.detach().appendTo(this.body());b=e("#select2-drop-mask");b.length==0&&(b=e(document.createElement("div")),b.attr("id","select2-drop-mask").attr("class","select2-drop-mask"),b.hide(),b.appendTo(this.body()),b.bind("mousedown touchstart",function(){var a=e("#select2-drop");a.length>0&&(a=a.data("select2"),a.opts.selectOnBlur&&a.selectHighlighted({noFocus:!0}),a.close())}));this.dropdown.prev()[0]!==b[0]&&this.dropdown.before(b);e("#select2-drop").removeAttr("id");
this.dropdown.attr("id","select2-drop");b.css(a());b.show();this.dropdown.show();this.positionDropdown();this.dropdown.addClass("select2-drop-active");this.ensureHighlightVisible();var h=this;this.container.parents().add(window).each(function(){e(this).bind(d+" "+c+" "+i,function(){e("#select2-drop-mask").css(a());h.positionDropdown()})})},close:function(){if(this.opened()){var a=this.containerId,b="scroll."+a,c="resize."+a,d="orientationchange."+a;this.container.parents().add(window).each(function(){e(this).unbind(b).unbind(c).unbind(d)});
this.clearDropdownAlignmentPreference();e("#select2-drop-mask").hide();this.dropdown.removeAttr("id");this.dropdown.hide();this.container.removeClass("select2-dropdown-open");this.results.empty();this.clearSearch();this.search.removeClass("select2-active");this.opts.element.trigger(e.Event("close"))}},clearSearch:function(){},getMaximumSelectionSize:function(){return p(this.opts.maximumSelectionSize)},ensureHighlightVisible:function(){var a=this.results,b,c,d,i;c=this.highlight();c<0||(c==0?a.scrollTop(0):
(b=this.findHighlightableChoices().find(".select2-result-label"),d=e(b[c]),i=d.offset().top+d.outerHeight(!0),c===b.length-1&&(b=a.find("li.select2-more-results"),b.length>0&&(i=b.offset().top+b.outerHeight(!0))),b=a.offset().top+a.outerHeight(!0),i>b&&a.scrollTop(a.scrollTop()+(i-b)),i=d.offset().top-a.offset().top,i<0&&d.css("display")!="none"&&a.scrollTop(a.scrollTop()+i)))},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-selected):not(.select2-disabled)")},
moveHighlight:function(a){for(var b=this.findHighlightableChoices(),c=this.highlight();c>-1&&c<b.length;){c+=a;var d=e(b[c]);if(d.hasClass("select2-result-selectable")&&!d.hasClass("select2-disabled")&&!d.hasClass("select2-selected")){this.highlight(c);break}}},highlight:function(a){var b=this.findHighlightableChoices();if(arguments.length===0)return m(b.filter(".select2-highlighted")[0],b.get());a>=b.length&&(a=b.length-1);a<0&&(a=0);this.results.find(".select2-highlighted").removeClass("select2-highlighted");
b=e(b[a]);b.addClass("select2-highlighted");this.ensureHighlightVisible();(b=b.data("select2-data"))&&this.opts.element.trigger({type:"highlight",val:this.id(b),choice:b})},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(a){a=e(a.target).closest(".select2-result-selectable");a.length>0&&!a.is(".select2-highlighted")?this.highlight(this.findHighlightableChoices().index(a)):a.length==0&&this.results.find(".select2-highlighted").removeClass("select2-highlighted")},
loadMoreIfNeeded:function(){var a=this.results,b=a.find("li.select2-more-results"),c=this.resultsPage+1,d=this,e=this.search.val(),h=this.context;b.length!==0&&b.offset().top-a.offset().top-a.height()<=this.opts.loadMorePadding&&(b.addClass("select2-active"),this.opts.query({element:this.opts.element,term:e,page:c,context:h,matcher:this.opts.matcher,callback:this.bind(function(f){if(d.opened())d.opts.populateResults.call(this,a,f.results,{term:e,page:c,context:h}),d.postprocessResults(f,!1,!1),f.more===
!0?(b.detach().appendTo(a).text(d.opts.formatLoadMore(c+1)),window.setTimeout(function(){d.loadMoreIfNeeded()},10)):b.remove(),d.positionDropdown(),d.resultsPage=c,d.context=f.context})}))},tokenize:function(){},updateResults:function(a){function b(){i.scrollTop(0);d.removeClass("select2-active");n.positionDropdown()}function c(a){i.html(a);b()}var d=this.search,i=this.results,h=this.opts,f,n=this;f=d.val();var j=e.data(this.container,"select2-last-term");if(!(a!==!0&&j&&l(f,j))&&(e.data(this.container,
"select2-last-term",f),!(a!==!0&&(this.showSearchInput===!1||!this.opened())))){j=this.getMaximumSelectionSize();if(j>=1&&(f=this.data(),e.isArray(f)&&f.length>=j&&v(h.formatSelectionTooBig,"formatSelectionTooBig"))){c("<li class='select2-selection-limit'>"+h.formatSelectionTooBig(j)+"</li>");return}d.val().length<h.minimumInputLength?v(h.formatInputTooShort,"formatInputTooShort")?c("<li class='select2-no-results'>"+h.formatInputTooShort(d.val(),h.minimumInputLength)+"</li>"):c(""):h.maximumInputLength&&
d.val().length>h.maximumInputLength?v(h.formatInputTooLong,"formatInputTooLong")?c("<li class='select2-no-results'>"+h.formatInputTooLong(d.val(),h.maximumInputLength)+"</li>"):c(""):(h.formatSearching&&this.findHighlightableChoices().length===0&&c("<li class='select2-searching'>"+h.formatSearching()+"</li>"),d.addClass("select2-active"),f=this.tokenize(),f!=g&&f!=null&&d.val(f),this.resultsPage=1,h.query({element:h.element,term:d.val(),page:this.resultsPage,context:null,matcher:h.matcher,callback:this.bind(function(f){var k;
this.opened()?(this.context=f.context===g?null:f.context,this.opts.createSearchChoice&&d.val()!==""&&(k=this.opts.createSearchChoice.call(null,d.val(),f.results),k!==g&&k!==null&&n.id(k)!==g&&n.id(k)!==null&&e(f.results).filter(function(){return l(n.id(this),n.id(k))}).length===0&&f.results.unshift(k)),f.results.length===0&&v(h.formatNoMatches,"formatNoMatches")?c("<li class='select2-no-results'>"+h.formatNoMatches(d.val())+"</li>"):(i.empty(),n.opts.populateResults.call(this,i,f.results,{term:d.val(),
page:this.resultsPage,context:null}),f.more===!0&&v(h.formatLoadMore,"formatLoadMore")&&(i.append("<li class='select2-more-results'>"+n.opts.escapeMarkup(h.formatLoadMore(this.resultsPage))+"</li>"),window.setTimeout(function(){n.loadMoreIfNeeded()},10)),this.postprocessResults(f,a),b(),this.opts.element.trigger({type:"loaded",data:f}))):this.search.removeClass("select2-active")})}))}},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0});this.close();
this.container.removeClass("select2-container-active");this.search[0]===document.activeElement&&this.search.blur();this.clearSearch();this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){H(this.search)},selectHighlighted:function(a){var b=this.highlight(),c=this.results.find(".select2-highlighted").closest(".select2-result").data("select2-data");c&&(this.highlight(b),this.onSelect(c,a))},getPlaceholder:function(){return this.opts.element.attr("placeholder")||
this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder},initContainerWidth:function(){var a=function(){var a,c,d,f;if(this.opts.width==="off")return null;else if(this.opts.width==="element")return this.opts.element.outerWidth(!1)===0?"auto":this.opts.element.outerWidth(!1)+"px";else if(this.opts.width==="copy"||this.opts.width==="resolve"){a=this.opts.element.attr("style");if(a!==g){a=a.split(";");for(d=0,f=a.length;d<f;d+=1)if(c=a[d].replace(/\s/g,
"").match(/width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i),c!==null&&c.length>=1)return c[1]}return(a=this.opts.element.css("width"))&&a.length>0?a:this.opts.width==="resolve"?this.opts.element.outerWidth(!1)===0?"auto":this.opts.element.outerWidth(!1)+"px":null}else return e.isFunction(this.opts.width)?this.opts.width():this.opts.width}.call(this);a!==null&&this.container.css("width",a)}});B=A(s,{createContainer:function(){return e(document.createElement("div")).attr({"class":"select2-container"}).html("<a href='javascript:void(0)' onclick='return false;' class='select2-choice' tabindex='-1'>   <span>&nbsp;</span><abbr class='select2-search-choice-close select2-display-none'></abbr>   <div><b></b></div></a><input class='select2-focusser select2-offscreen' type='text'/><div class='select2-drop select2-display-none'>   <div class='select2-search'>       <input type='text' autocomplete='off' class='select2-input'/>   </div>   <ul class='select2-results'>   </ul></div>")},
disable:function(){this.enabled&&(this.parent.disable.apply(this,arguments),this.focusser.attr("disabled","disabled"))},enable:function(){this.enabled||(this.parent.enable.apply(this,arguments),this.focusser.removeAttr("disabled"))},opening:function(){this.parent.opening.apply(this,arguments);this.showSearchInput!==!1&&this.search.val(this.focusser.val());this.search.focus();this.focusser.attr("disabled","disabled").val("");this.updateResults(!0);this.opts.element.trigger(e.Event("open"))},close:function(){this.opened()&&
(this.parent.close.apply(this,arguments),this.focusser.removeAttr("disabled"),H(this.focusser))},focus:function(){this.opened()?this.close():(this.focusser.removeAttr("disabled"),this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments);this.focusser.removeAttr("disabled");this.focusser.focus()},initContainer:function(){var a,b=this.container,c=this.dropdown;this.showSearch(this.opts.minimumResultsForSearch>=
0);this.selection=a=b.find(".select2-choice");this.focusser=b.find(".select2-focusser");this.focusser.attr("id","s2id_autogen"+x());e("label[for='"+this.opts.element.attr("id")+"']").attr("for",this.focusser.attr("id"));this.focusser.attr("tabindex",this.elementTabIndex);this.search.bind("keydown",this.bind(function(a){if(this.enabled)if(a.which===f.PAGE_UP||a.which===f.PAGE_DOWN)j(a);else switch(a.which){case f.UP:case f.DOWN:this.moveHighlight(a.which===f.UP?-1:1);j(a);break;case f.TAB:case f.ENTER:this.selectHighlighted();
j(a);break;case f.ESC:this.cancel(a),j(a)}}));this.search.bind("blur",this.bind(function(){document.activeElement===this.body().get(0)&&window.setTimeout(this.bind(function(){this.search.focus()}),0)}));this.focusser.bind("keydown",this.bind(function(a){if(this.enabled&&!(a.which===f.TAB||f.isControl(a)||f.isFunctionKey(a)||a.which===f.ESC))if(this.opts.openOnEnter===!1&&a.which===f.ENTER)j(a);else if(a.which==f.DOWN||a.which==f.UP||a.which==f.ENTER&&this.opts.openOnEnter)this.open(),j(a);else if(a.which==
f.DELETE||a.which==f.BACKSPACE)this.opts.allowClear&&this.clear(),j(a)}));E(this.focusser);this.focusser.bind("keyup-change input",this.bind(function(a){a.stopPropagation();this.opened()||this.open()}));a.delegate("abbr","mousedown",this.bind(function(a){this.enabled&&(this.clear(),a.preventDefault(),a.stopImmediatePropagation(),this.close(),this.selection.focus())}));a.bind("mousedown",this.bind(function(a){this.opened()?this.close():this.enabled&&this.open();j(a)}));c.bind("mousedown",this.bind(function(){this.search.focus()}));
a.bind("focus",this.bind(function(a){j(a)}));this.focusser.bind("focus",this.bind(function(){this.container.addClass("select2-container-active")})).bind("blur",this.bind(function(){this.opened()||this.container.removeClass("select2-container-active")}));this.search.bind("focus",this.bind(function(){this.container.addClass("select2-container-active")}));this.initContainerWidth();this.opts.element.addClass("select2-offscreen");this.setPlaceholder()},clear:function(a){var b=this.selection.data("select2-data");
b&&(this.opts.element.val(""),this.selection.find("span").empty(),this.selection.removeData("select2-data"),this.setPlaceholder(),a!==!1&&(this.opts.element.trigger({type:"removed",val:this.id(b),choice:b}),this.triggerChange({removed:b})))},initSelection:function(){if(this.opts.element.val()===""&&this.opts.element.text()==="")this.updateSelection([]),this.close(),this.setPlaceholder();else{var a=this;this.opts.initSelection.call(null,this.opts.element,function(b){b!==g&&b!==null&&(a.updateSelection(b),
a.close(),a.setPlaceholder())})}},prepareOpts:function(){var a=this.parent.prepareOpts.apply(this,arguments),b=this;if(a.element.get(0).tagName.toLowerCase()==="select")a.initSelection=function(a,d){var e=a.find(":selected");d(b.optionToData(e))};else if("data"in a)a.initSelection=a.initSelection||function(b,d){var f=b.val(),h=null;a.query({matcher:function(b,c,d){(b=l(f,a.id(d)))&&(h=d);return b},callback:!e.isFunction(d)?e.noop:function(){d(h)}})};return a},getPlaceholder:function(){return this.select&&
this.select.find("option").first().text()!==""?g:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var a=this.getPlaceholder();this.opts.element.val()===""&&a!==g&&!(this.select&&this.select.find("option:first").text()!=="")&&(this.selection.find("span").html(this.opts.escapeMarkup(a)),this.selection.addClass("select2-default"),this.container.removeClass("select2-allowclear"),this.selection.find("abbr").hide())},postprocessResults:function(a,b,c){var d=0,e=this,f=!0;this.findHighlightableChoices().each2(function(a,
b){if(l(e.id(b.data("select2-data")),e.opts.element.val()))return d=a,!1});c!==!1&&this.highlight(d);if(b===!0)b=this.opts.minimumResultsForSearch,f=b<0?!1:M(a.results)>=b,this.showSearch(f)},showSearch:function(a){this.showSearchInput=a;this.dropdown.find(".select2-search")[a?"removeClass":"addClass"]("select2-search-hidden");e(this.dropdown,this.container)[a?"addClass":"removeClass"]("select2-with-searchbox")},onSelect:function(a,b){if(this.triggerSelect(a)){var c=this.opts.element.val(),d=this.data();
this.opts.element.val(this.id(a));this.updateSelection(a);this.opts.element.trigger({type:"selected",val:this.id(a),choice:a});this.close();(!b||!b.noFocus)&&this.selection.focus();l(c,this.id(a))||this.triggerChange({added:a,removed:d})}},updateSelection:function(a){var b=this.selection.find("span");this.selection.data("select2-data",a);b.empty();a=this.opts.formatSelection(a,b);a!==g&&b.append(this.opts.escapeMarkup(a));this.selection.removeClass("select2-default");this.opts.allowClear&&this.getPlaceholder()!==
g&&(this.container.addClass("select2-allowclear"),this.selection.find("abbr").show())},val:function(){var a,b=!1,c=null,d=this,e=this.data();if(arguments.length===0)return this.opts.element.val();a=arguments[0];arguments.length>1&&(b=arguments[1]);if(this.select)this.select.val(a).find(":selected").each2(function(a,b){c=d.optionToData(b);return!1}),this.updateSelection(c),this.setPlaceholder(),b&&this.triggerChange({added:c,removed:e});else{if(this.opts.initSelection===g)throw Error("cannot call val() if initSelection() is not defined");
!a&&a!==0?this.clear(b):(this.opts.element.val(a),this.opts.initSelection(this.opts.element,function(a){d.opts.element.val(!a?"":d.id(a));d.updateSelection(a);d.setPlaceholder();b&&d.triggerChange({added:a,removed:e})}))}},clearSearch:function(){this.search.val("");this.focusser.val("")},data:function(a,b){var c;if(arguments.length===0)return c=this.selection.data("select2-data"),c==g&&(c=null),c;else!a||a===""?this.clear(b):(c=this.data(),this.opts.element.val(!a?"":this.id(a)),this.updateSelection(a),
b&&this.triggerChange({added:a,removed:c}))}});C=A(s,{createContainer:function(){return e(document.createElement("div")).attr({"class":"select2-container select2-container-multi"}).html("    <ul class='select2-choices'>  <li class='select2-search-field'>    <input type='text' autocomplete='off' class='select2-input'>  </li></ul><div class='select2-drop select2-drop-multi select2-display-none'>   <ul class='select2-results'>   </ul></div>")},prepareOpts:function(){var a=this.parent.prepareOpts.apply(this,
arguments),b=this;if(a.element.get(0).tagName.toLowerCase()==="select")a.initSelection=function(a,d){var e=[];a.find(":selected").each2(function(a,c){e.push(b.optionToData(c))});d(e)};else if("data"in a)a.initSelection=a.initSelection||function(b,d){var f=y(b.val(),a.separator),h=[];a.query({matcher:function(b,c,d){(b=e.grep(f,function(b){return l(b,a.id(d))}).length)&&h.push(d);return b},callback:!e.isFunction(d)?e.noop:function(){d(h)}})};return a},initContainer:function(){var a;this.searchContainer=
this.container.find(".select2-search-field");this.selection=a=this.container.find(".select2-choices");this.search.attr("id","s2id_autogen"+x());e("label[for='"+this.opts.element.attr("id")+"']").attr("for",this.search.attr("id"));this.search.bind("input paste",this.bind(function(){this.enabled&&(this.opened()||this.open())}));this.search.attr("tabindex",this.elementTabIndex);this.search.bind("keydown",this.bind(function(b){if(this.enabled){if(b.which===f.BACKSPACE&&this.search.val()===""){this.close();
var c;c=a.find(".select2-search-choice-focus");if(c.length>0){this.unselect(c.first());this.search.width(10);j(b);return}c=a.find(".select2-search-choice:not(.select2-locked)");c.length>0&&c.last().addClass("select2-search-choice-focus")}else a.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus");if(this.opened())switch(b.which){case f.UP:case f.DOWN:this.moveHighlight(b.which===f.UP?-1:1);j(b);return;case f.ENTER:case f.TAB:this.selectHighlighted();j(b);return;case f.ESC:this.cancel(b);
j(b);return}if(!(b.which===f.TAB||f.isControl(b)||f.isFunctionKey(b)||b.which===f.BACKSPACE||b.which===f.ESC)){if(b.which===f.ENTER)if(this.opts.openOnEnter===!1)return;else if(b.altKey||b.ctrlKey||b.shiftKey||b.metaKey)return;this.open();(b.which===f.PAGE_UP||b.which===f.PAGE_DOWN)&&j(b);b.which===f.ENTER&&j(b)}}}));this.search.bind("keyup",this.bind(this.resizeSearch));this.search.bind("blur",this.bind(function(a){this.container.removeClass("select2-container-active");this.search.removeClass("select2-focused");
this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus");this.opened()||this.clearSearch();a.stopImmediatePropagation()}));this.container.delegate(".select2-choices","mousedown",this.bind(function(a){this.enabled&&!(e(a.target).closest(".select2-search-choice").length>0)&&(this.clearPlaceholder(),this.open(),this.focusSearch(),a.preventDefault())}));this.container.delegate(".select2-choices","focus",this.bind(function(){this.enabled&&(this.container.addClass("select2-container-active"),
this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())}));this.initContainerWidth();this.opts.element.addClass("select2-offscreen");this.clearSearch()},enable:function(){this.enabled||(this.parent.enable.apply(this,arguments),this.search.removeAttr("disabled"))},disable:function(){this.enabled&&(this.parent.disable.apply(this,arguments),this.search.attr("disabled",!0))},initSelection:function(){this.opts.element.val()===""&&this.opts.element.text()===""&&(this.updateSelection([]),
this.close(),this.clearSearch());if(this.select||this.opts.element.val()!==""){var a=this;this.opts.initSelection.call(null,this.opts.element,function(b){b!==g&&b!==null&&(a.updateSelection(b),a.close(),a.clearSearch())})}},clearSearch:function(){var a=this.getPlaceholder(),b=this.getMaxSearchWidth();a!==g&&this.getVal().length===0&&this.search.hasClass("select2-focused")===!1?(this.search.val(a).addClass("select2-default"),this.search.width(b>0?b:this.container.css("width"))):this.search.val("").width(10)},
clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.clearPlaceholder();this.resizeSearch();this.parent.opening.apply(this,arguments);this.focusSearch();this.updateResults(!0);this.search.focus();this.opts.element.trigger(e.Event("open"))},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close();this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},
updateSelection:function(a){var b=[],c=[],d=this;e(a).each(function(){m(d.id(this),b)<0&&(b.push(d.id(this)),c.push(this))});a=c;this.selection.find(".select2-search-choice").remove();e(a).each(function(){d.addSelectedChoice(this)});d.postprocessResults()},tokenize:function(){var a=this.search.val(),a=this.opts.tokenizer(a,this.data(),this.bind(this.onSelect),this.opts);a!=null&&a!=g&&(this.search.val(a),a.length>0&&this.open())},onSelect:function(a,b){this.triggerSelect(a)&&(this.addSelectedChoice(a),
this.opts.element.trigger({type:"selected",val:this.id(a),choice:a}),(this.select||!this.opts.closeOnSelect)&&this.postprocessResults(),this.opts.closeOnSelect?(this.close(),this.search.width(10)):this.countSelectableResults()>0?(this.search.width(10),this.resizeSearch(),this.getMaximumSelectionSize()>0&&this.val().length>=this.getMaximumSelectionSize()&&this.updateResults(!0),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:a}),(!b||!b.noFocus)&&this.focusSearch())},
cancel:function(){this.close();this.focusSearch()},addSelectedChoice:function(a){var b=!a.locked,c=e("<li class='select2-search-choice'>    <div></div>    <a href='#' onclick='return false;' class='select2-search-choice-close' tabindex='-1'></a></li>"),d=e("<li class='select2-search-choice select2-locked'><div></div></li>"),c=b?c:d,d=this.id(a),f=this.getVal(),h;h=this.opts.formatSelection(a,c.find("div"));h!=g&&c.find("div").replaceWith("<div title='"+this.opts.escapeMarkup(h)+"'>"+this.opts.escapeMarkup(h)+
"</div>");b&&c.find(".select2-search-choice-close").bind("mousedown",j).bind("click dblclick",this.bind(function(a){this.enabled&&(e(a.target).closest(".select2-search-choice").fadeOut("fast",this.bind(function(){this.unselect(e(a.target));this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus");this.close();this.focusSearch()})).dequeue(),j(a))})).bind("focus",this.bind(function(){this.enabled&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))}));
c.data("select2-data",a);c.insertBefore(this.searchContainer);f.push(d);this.setVal(f)},unselect:function(a){var b=this.getVal(),c,d,a=a.closest(".select2-search-choice");if(a.length===0)throw"Invalid argument: "+a+". Must be .select2-search-choice";if(c=a.data("select2-data"))d=m(this.id(c),b),d>=0&&(b.splice(d,1),this.setVal(b),this.select&&this.postprocessResults()),a.remove(),this.opts.element.trigger({type:"removed",val:this.id(c),choice:c}),this.triggerChange({removed:c})},postprocessResults:function(){var a=
this.getVal(),b=this.results.find(".select2-result"),c=this.results.find(".select2-result-with-children"),d=this;b.each2(function(b,c){var e=d.id(c.data("select2-data"));m(e,a)>=0&&(c.addClass("select2-selected"),c.find(".select2-result-selectable").addClass("select2-selected"))});c.each2(function(a,b){!b.is(".select2-result-selectable")&&b.find(".select2-result-selectable:not(.select2-selected)").length===0&&b.addClass("select2-selected")});this.highlight()==-1&&d.highlight(0)},getMaxSearchWidth:function(){return this.selection.width()-
(this.search.outerWidth(!1)-this.search.width())},resizeSearch:function(){var a,b,c,d,f=this.search.outerWidth(!1)-this.search.width();a=this.search;t||(c=a[0].currentStyle||window.getComputedStyle(a[0],null),t=e(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:c.fontSize,fontFamily:c.fontFamily,fontStyle:c.fontStyle,fontWeight:c.fontWeight,letterSpacing:c.letterSpacing,textTransform:c.textTransform,whiteSpace:"nowrap"}),t.attr("class",
"select2-sizer"),e("body").append(t));t.text(a.val());a=t.width()+10;b=this.search.offset().left;c=this.selection.width();d=this.selection.offset().left;b=c-(b-d)-f;b<a&&(b=c-f);b<40&&(b=c-f);b<=0&&(b=a);this.search.width(b)},getVal:function(){var a;return this.select?(a=this.select.val(),a===null?[]:a):(a=this.opts.element.val(),y(a,this.opts.separator))},setVal:function(a){var b;this.select?this.select.val(a):(b=[],e(a).each(function(){m(this,b)<0&&b.push(this)}),this.opts.element.val(b.length===
0?"":b.join(this.opts.separator)))},buildChangeDetails:function(a,b){for(var b=b.slice(0),a=a.slice(0),c=0;c<b.length;c++)for(var d=0;d<a.length;d++)l(this.opts.id(b[c]),this.opts.id(a[d]))&&(b.splice(c,1),c--,a.splice(d,1),d--);return{added:b,removed:a}},val:function(a,b){var c,d=this;if(arguments.length===0)return this.getVal();c=this.data();c.length||(c=[]);if(!a&&a!==0)this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),b&&this.triggerChange({added:this.data(),removed:c});else{this.setVal(a);
if(this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),b&&this.triggerChange(this.buildChangeDetails(c,this.data()));else{if(this.opts.initSelection===g)throw Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,function(a){var f=e(a).map(d.id);d.setVal(f);d.updateSelection(a);d.clearSearch();b&&d.triggerChange(this.buildChangeDetails(c,this.data()))})}this.clearSearch()}},onSortStart:function(){if(this.select)throw Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");
this.search.width(0);this.searchContainer.hide()},onSortEnd:function(){var a=[],b=this;this.searchContainer.show();this.searchContainer.appendTo(this.searchContainer.parent());this.resizeSearch();this.selection.find(".select2-search-choice").each(function(){a.push(b.opts.id(e(this).data("select2-data")))});this.setVal(a);this.triggerChange()},data:function(a,b){var c=this,d,f;if(arguments.length===0)return this.selection.find(".select2-search-choice").map(function(){return e(this).data("select2-data")}).get();
else f=this.data(),a||(a=[]),d=e.map(a,function(a){return c.opts.id(a)}),this.setVal(d),this.updateSelection(a),this.clearSearch(),b&&this.triggerChange(this.buildChangeDetails(f,this.data()))}});e.fn.select2=function(){var a=Array.prototype.slice.call(arguments,0),b,c,d,f,h="val,destroy,opened,open,close,focus,isFocused,container,onSortStart,onSortEnd,enable,disable,positionDropdown,data".split(",");this.each(function(){if(a.length===0||typeof a[0]==="object"){b=a.length===0?{}:e.extend({},a[0]);
b.element=e(this);if(b.element.get(0).tagName.toLowerCase()==="select")f=b.element.attr("multiple");else if(f=b.multiple||!1,"tags"in b)b.multiple=f=!0;c=f?new C:new B;c.init(b)}else if(typeof a[0]==="string"){if(m(a[0],h)<0)throw"Unknown method: "+a[0];d=g;c=e(this).data("select2");if(c!==g&&(d=a[0]==="container"?c.container:c[a[0]].apply(c,a.slice(1)),d!==g))return!1}else throw"Invalid arguments to select2 plugin: "+a;});return d===g?this:d};e.fn.select2.defaults={width:"copy",loadMorePadding:0,
closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(a,b,c,d){b=[];I(a.text,c.term,b,d);return b.join("")},formatSelection:function(a){return a?a.text:g},sortResults:function(a){return a},formatResultCssClass:function(){return g},formatNoMatches:function(){return"No matches found"},formatInputTooShort:function(a,b){var c=b-a.length;return"Please enter "+c+" more character"+(c==1?"":"s")},formatInputTooLong:function(a,b){var c=
a.length-b;return"Please delete "+c+" character"+(c==1?"":"s")},formatSelectionTooBig:function(a){return"You can only select "+a+" item"+(a==1?"":"s")},formatLoadMore:function(){return"Loading more results..."},formatSearching:function(){return"Searching..."},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(a){return a.id},matcher:function(a,b){return(""+b).toUpperCase().indexOf((""+a).toUpperCase())>=0},separator:",",tokenSeparators:[],tokenizer:function(a,
b,c,d){var e=a,f=!1,k,j,m,o;if(!d.createSearchChoice||!d.tokenSeparators||d.tokenSeparators.length<1)return g;for(;;){f=-1;for(j=0,m=d.tokenSeparators.length;j<m;j++)if(o=d.tokenSeparators[j],f=a.indexOf(o),f>=0)break;if(f<0)break;k=a.substring(0,f);a=a.substring(f+o.length);if(k.length>0&&(k=d.createSearchChoice(k,b),k!==g&&k!==null&&d.id(k)!==g&&d.id(k)!==null)){f=!1;for(j=0,m=b.length;j<m;j++)if(l(d.id(k),d.id(b[j]))){f=!0;break}f||c(k)}}if(e!==a)return a},escapeMarkup:function(a){var b={"\\":"&#92;",
"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return String(a).replace(/[&<>"'\/\\]/g,function(a){return b[a[0]]})},blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(a){return a},adaptDropdownCssClass:function(){return null}};window.Select2={query:{ajax:J,local:K,tags:L},util:{debounce:G,markMatch:I},"class":{"abstract":s,single:B,multi:C}}}})(jQuery);
